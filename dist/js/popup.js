!function(e){function t(t){for(var n,s,c=t[0],i=t[1],u=t[2],l=0,d=[];l<c.length;l++)s=c[l],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(p&&p(t);d.length;)d.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,c=1;c<r.length;c++){var i=r[c];0!==o[i]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},o={0:0},a=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var c=window.webpackJsonp=window.webpackJsonp||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var p=i;a.push([6,1]),r()}([,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildComposedName=t.compareChapters=t.parseInside=void 0,t.parseInside=function(e,t,r){return e.split(t)[1].split(r)[0]},t.compareChapters=function(e,t){const r=parseInt(e.number.replace(/.*-/,"")),n=parseInt(t.number.replace(/.*-/,""));return r<n?-1:r>n?1:0},t.buildComposedName=function(e){return`${e.name} (${e.year}) [${e.identifier}=${e.key}]`}},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.message=void 0,t.message={errorLink:"Invalid Link",errorBody:"Invalid body data",errorUrl:"Invalid Server"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSerie=t.sortChapter=t.saveChapter=t.checkChapter=t.getNames=t.updateNames=t.saveMovie=void 0;const n=r(2),o=r(0),a="seriesLinks",s=chrome.storage.local;function c(e,t=!1,r=s){return i(e.name).then(r=>r&&!t?r.name:u(a).then(t=>p({[a]:Object.assign(Object.assign({},t),{[e.key]:e})}).then(()=>e.name)))}function i(e,t=s){return console.log("file: chrome.ts ~ line 88 ~ getSerie ~ serieName",e),u(a).then(t=>t[e])}function u(e,t=!1,r=s){return new o((n,o)=>r.get(e,(function(r){return r[e]?n(r[e]):n(t?[]:{})})))}function p(e,t=s){return new o((r,n)=>t.set(e,()=>r(e)))}t.saveMovie=c,t.updateNames=function(){return u(a).then(e=>p({seriesNames:Object.keys(e).map(t=>{const r=e[t];return n.buildComposedName(r)})}))},t.getNames=function(e=s){return u("seriesNames",!0).then(e=>e)},t.checkChapter=function(e,t,r=s){const n=t.replace(/.*\//,"");return i(e).then(e=>{if(e.chapters.filter(e=>t===e.url).length>0)return o.reject(new Error(`The chapter ${n} was saved previously`))})},t.saveChapter=function(e,t,r=s){return i(e).then(e=>c(Object.assign(Object.assign({},e),{chapters:[...e.chapters,t]}),!0).then(()=>t))},t.sortChapter=function(e,t=s){return i(e).then(t=>{const r=t.chapters.sort(n.compareChapters);return c(Object.assign(Object.assign({},t),{chapters:r}),!0).then(()=>e)})},t.getSerie=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7),o=r(8),a=r(5),s=r(2);n((function(){function e(){return a.updateNames().then(()=>a.getNames()).then(e=>(n("#list").empty(),e.forEach(e=>{const t=s.parseInside(e,"=","]");var r;return n("#list").append(`<div class="row my-auto">\n          <p class="col-8 my-auto">${e}<span></p>\n          <button id="${t}-copy" class="btn btn-dark chapter col-2">Copy</button>\n          <button id="${t}-show" class="btn btn-dark chapter col-2">Show</button>\n          </div>`),n(`#${r=t}-show`).click(()=>a.getSerie(r).then(e=>{chrome.tabs.create({url:e.url})})),function(e){const t=`#${e}-copy`;n(t).click(()=>(n(t).text("Copying"),a.getSerie(e).then(e=>{const r=s.buildComposedName(e);return n(t).text("Copied"),function(e,t="text/plain"){document.oncopy=function(r){r.clipboardData.setData(t,e),r.preventDefault()},document.execCommand("copy",!1,null)}(r)})))}(t)})))}chrome.tabs.query({active:!0,currentWindow:!0},(function(e){n("#url").text(e[0].url)})),e(),n("#processpage").click(()=>{n("#processpage").text("Wait"),chrome.tabs.query({active:!0,currentWindow:!0},t=>{const r=t[0];return chrome.tabs.executeScript(r.id,{code:"document.body.innerHTML"},(function(t){return o.getMediaData(r.url,t[0]).then(()=>e()).then(()=>n("#processpage").text("Ready"))}))})}),n("#clear").click(()=>{chrome.storage.local.clear(()=>{e()})})}))},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkUrlCompatibility=t.getMediaData=void 0;const n=r(0),o=r(11),a=r(4),s=r(5);t.getMediaData=function(e,t){return i(e).then(r=>r(e,t).then(s.saveMovie).then(e=>console.log("Completed: "+e)))};const c={imdb:{regex:/.*imdb.com\/title\/.*$/,parser:o.parseImdbData},aniList:{regex:/.*anilist.co\/anime\/.*$/,parser:o.parseImdbData}};function i(e){return new n((t,r)=>{const n=Object.keys(c).map(t=>c[t].regex.test(e)?c[t].parser:null).filter(e=>e);return 1===n.length?t(n[0]):r(a.message.errorUrl)})}t.checkUrlCompatibility=i},,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchPage=t.parseData=t.parseId=t.parseImdbData=void 0;const n=r(2),o=r(0),a=r(4);function s(e){return e?o.resolve("tt"+n.parseInside(e,"/tt","/?")):o.reject(a.message.errorLink)}function c(e){if(!e)return o.reject(a.message.errorLink);const t=n.parseInside(e,"title_wrapper","slate_wrapper"),r={name:n.parseInside(t,'class="">',"&nbsp"),year:n.parseInside(t,'inf">',"</a>"),identifier:"imdbid"};return o.resolve(r)}t.parseImdbData=function(e,t){return o.join(s(e),c(t),(t,r)=>(r.key=t,r.url=e,r))},t.parseId=s,t.parseData=c,t.fetchPage=function(e){return new o((t,r)=>fetch(e).then(e=>t(e.clone().text())))}}]);